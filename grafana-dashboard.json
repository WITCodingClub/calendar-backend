{
  "__inputs": [
    {
      "name": "DS_GRAPHITE",
      "label": "Graphite",
      "description": "Graphite data source for StatsD metrics",
      "type": "datasource",
      "pluginId": "graphite",
      "pluginName": "Graphite"
    }
  ],
  "__requires": [
    {
      "type": "grafana",
      "id": "grafana",
      "name": "Grafana",
      "version": "9.0.0"
    },
    {
      "type": "datasource",
      "id": "graphite",
      "name": "Graphite",
      "version": "1.0.0"
    },
    {
      "type": "panel",
      "id": "timeseries",
      "name": "Time series",
      "version": ""
    }
  ],
  "annotations": {
    "list": []
  },
  "editable": true,
  "fiscalYearStartMonth": 0,
  "graphTooltip": 0,
  "id": null,
  "links": [],
  "liveNow": false,
  "panels": [
    {
      "datasource": {
        "type": "graphite",
        "uid": "${DS_GRAPHITE}"
      },
      "fieldConfig": {
        "defaults": {},
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 0
      },
      "id": 1,
      "options": {},
      "targets": [
        {
          "datasource": {
            "type": "graphite",
            "uid": "${DS_GRAPHITE}"
          },
          "refId": "A",
          "target": "aliasByNode(sumSeries(stats.witccdotdev.server.$env.controller.request.count.*), 5)"
        }
      ],
      "title": "Request Rate",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "graphite",
        "uid": "${DS_GRAPHITE}"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "ms"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 0
      },
      "id": 2,
      "options": {},
      "targets": [
        {
          "datasource": {
            "type": "graphite",
            "uid": "${DS_GRAPHITE}"
          },
          "refId": "A",
          "target": "alias(stats.witccdotdev.server.$env.controller.request.duration.upper_95, 'p95')"
        },
        {
          "datasource": {
            "type": "graphite",
            "uid": "${DS_GRAPHITE}"
          },
          "refId": "B",
          "target": "alias(stats.witccdotdev.server.$env.controller.request.duration.median, 'p50')"
        },
        {
          "datasource": {
            "type": "graphite",
            "uid": "${DS_GRAPHITE}"
          },
          "refId": "C",
          "target": "alias(stats.witccdotdev.server.$env.controller.request.duration.mean, 'mean')"
        }
      ],
      "title": "Response Time (p95, p50)",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "graphite",
        "uid": "${DS_GRAPHITE}"
      },
      "fieldConfig": {
        "defaults": {},
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 8
      },
      "id": 3,
      "options": {},
      "targets": [
        {
          "datasource": {
            "type": "graphite",
            "uid": "${DS_GRAPHITE}"
          },
          "refId": "A",
          "target": "alias(sumSeries(stats.witccdotdev.server.$env.controller.request.error.status_class:4xx.*), '4xx Errors')"
        },
        {
          "datasource": {
            "type": "graphite",
            "uid": "${DS_GRAPHITE}"
          },
          "refId": "B",
          "target": "alias(sumSeries(stats.witccdotdev.server.$env.controller.request.error.status_class:5xx.*), '5xx Errors')"
        },
        {
          "datasource": {
            "type": "graphite",
            "uid": "${DS_GRAPHITE}"
          },
          "refId": "C",
          "target": "alias(sumSeries(stats.witccdotdev.server.$env.controller.request.exception.*), 'Exceptions')"
        }
      ],
      "title": "Error Rate (4xx, 5xx)",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "graphite",
        "uid": "${DS_GRAPHITE}"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "ms"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 8
      },
      "id": 4,
      "options": {},
      "targets": [
        {
          "datasource": {
            "type": "graphite",
            "uid": "${DS_GRAPHITE}"
          },
          "refId": "A",
          "target": "alias(stats.witccdotdev.server.$env.database.query.duration.operation:select.mean, 'SELECT (avg)')"
        },
        {
          "datasource": {
            "type": "graphite",
            "uid": "${DS_GRAPHITE}"
          },
          "refId": "B",
          "target": "alias(stats.witccdotdev.server.$env.database.query.duration.operation:insert.mean, 'INSERT (avg)')"
        },
        {
          "datasource": {
            "type": "graphite",
            "uid": "${DS_GRAPHITE}"
          },
          "refId": "C",
          "target": "alias(stats.witccdotdev.server.$env.database.query.duration.operation:update.mean, 'UPDATE (avg)')"
        },
        {
          "datasource": {
            "type": "graphite",
            "uid": "${DS_GRAPHITE}"
          },
          "refId": "D",
          "target": "alias(stats.witccdotdev.server.$env.database.query.duration.operation:delete.mean, 'DELETE (avg)')"
        }
      ],
      "title": "Database Query Performance",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "graphite",
        "uid": "${DS_GRAPHITE}"
      },
      "fieldConfig": {
        "defaults": {},
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 16
      },
      "id": 5,
      "options": {},
      "targets": [
        {
          "datasource": {
            "type": "graphite",
            "uid": "${DS_GRAPHITE}"
          },
          "refId": "A",
          "target": "alias(sumSeries(stats.witccdotdev.server.$env.job.success.*), 'Successful')"
        },
        {
          "datasource": {
            "type": "graphite",
            "uid": "${DS_GRAPHITE}"
          },
          "refId": "B",
          "target": "alias(sumSeries(stats.witccdotdev.server.$env.job.failure.*), 'Failed')"
        },
        {
          "datasource": {
            "type": "graphite",
            "uid": "${DS_GRAPHITE}"
          },
          "refId": "C",
          "target": "alias(sumSeries(stats.witccdotdev.server.$env.job.enqueued.*), 'Enqueued')"
        }
      ],
      "title": "Background Jobs - Success vs Failure",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "graphite",
        "uid": "${DS_GRAPHITE}"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "ms"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 16
      },
      "id": 6,
      "options": {},
      "targets": [
        {
          "datasource": {
            "type": "graphite",
            "uid": "${DS_GRAPHITE}"
          },
          "refId": "A",
          "target": "aliasByNode(stats.witccdotdev.server.$env.job.duration.job:*.mean, 5)"
        }
      ],
      "title": "Job Duration by Type",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "graphite",
        "uid": "${DS_GRAPHITE}"
      },
      "fieldConfig": {
        "defaults": {
          "max": 100,
          "min": 0,
          "unit": "percent"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 24
      },
      "id": 7,
      "options": {},
      "targets": [
        {
          "datasource": {
            "type": "graphite",
            "uid": "${DS_GRAPHITE}"
          },
          "refId": "A",
          "target": "alias(asPercent(sumSeries(stats.witccdotdev.server.$env.cache.hit.*), sumSeries(stats.witccdotdev.server.$env.cache.operation.count.*)), 'Hit Rate %')"
        }
      ],
      "title": "Cache Hit Rate",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "graphite",
        "uid": "${DS_GRAPHITE}"
      },
      "fieldConfig": {
        "defaults": {},
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 24
      },
      "id": 8,
      "options": {},
      "targets": [
        {
          "datasource": {
            "type": "graphite",
            "uid": "${DS_GRAPHITE}"
          },
          "refId": "A",
          "target": "alias(sumSeries(stats.witccdotdev.server.$env.cache.hit.*), 'Hits')"
        },
        {
          "datasource": {
            "type": "graphite",
            "uid": "${DS_GRAPHITE}"
          },
          "refId": "B",
          "target": "alias(sumSeries(stats.witccdotdev.server.$env.cache.miss.*), 'Misses')"
        },
        {
          "datasource": {
            "type": "graphite",
            "uid": "${DS_GRAPHITE}"
          },
          "refId": "C",
          "target": "alias(sumSeries(stats.witccdotdev.server.$env.cache.operation.count.operation:write.*), 'Writes')"
        }
      ],
      "title": "Cache Operations",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "graphite",
        "uid": "${DS_GRAPHITE}"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "ms"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 32
      },
      "id": 9,
      "options": {},
      "targets": [
        {
          "datasource": {
            "type": "graphite",
            "uid": "${DS_GRAPHITE}"
          },
          "refId": "A",
          "target": "alias(stats.witccdotdev.server.$env.calendar.sync.duration.mean, 'Avg Sync Time')"
        },
        {
          "datasource": {
            "type": "graphite",
            "uid": "${DS_GRAPHITE}"
          },
          "refId": "B",
          "target": "alias(stats.witccdotdev.server.$env.calendar.sync.duration.upper_95, 'p95 Sync Time')"
        }
      ],
      "title": "Google Calendar Sync Performance",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "graphite",
        "uid": "${DS_GRAPHITE}"
      },
      "fieldConfig": {
        "defaults": {},
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 32
      },
      "id": 10,
      "options": {},
      "targets": [
        {
          "datasource": {
            "type": "graphite",
            "uid": "${DS_GRAPHITE}"
          },
          "refId": "A",
          "target": "alias(sumSeries(stats.witccdotdev.server.$env.calendar.sync.event.created.*), 'Created')"
        },
        {
          "datasource": {
            "type": "graphite",
            "uid": "${DS_GRAPHITE}"
          },
          "refId": "B",
          "target": "alias(sumSeries(stats.witccdotdev.server.$env.calendar.sync.event.updated.*), 'Updated')"
        },
        {
          "datasource": {
            "type": "graphite",
            "uid": "${DS_GRAPHITE}"
          },
          "refId": "C",
          "target": "alias(sumSeries(stats.witccdotdev.server.$env.calendar.sync.event.deleted.*), 'Deleted')"
        },
        {
          "datasource": {
            "type": "graphite",
            "uid": "${DS_GRAPHITE}"
          },
          "refId": "D",
          "target": "alias(sumSeries(stats.witccdotdev.server.$env.calendar.sync.event.skipped.*), 'Skipped')"
        }
      ],
      "title": "Calendar Event Operations",
      "type": "timeseries"
    }
  ],
  "refresh": "30s",
  "schemaVersion": 39,
  "tags": [
    "witcc",
    "calendar",
    "rails"
  ],
  "templating": {
    "list": [
      {
        "current": {
          "selected": false,
          "text": "production",
          "value": "production"
        },
        "hide": 0,
        "includeAll": false,
        "multi": false,
        "name": "env",
        "options": [
          {
            "selected": true,
            "text": "production",
            "value": "production"
          },
          {
            "selected": false,
            "text": "stage",
            "value": "stage"
          },
          {
            "selected": false,
            "text": "development",
            "value": "development"
          },
          {
            "selected": false,
            "text": "test",
            "value": "test"
          }
        ],
        "query": "production,stage,development,test",
        "queryValue": "",
        "skipUrlSync": false,
        "type": "custom"
      }
    ]
  },
  "time": {
    "from": "now-6h",
    "to": "now"
  },
  "timepicker": {},
  "timezone": "browser",
  "title": "WIT Calendar Backend - Application Overview",
  "uid": "wit-calendar-backend",
  "version": 1,
  "weekStart": ""
}
